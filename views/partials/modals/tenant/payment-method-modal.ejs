<div class="modal" id="addPaymentMethodModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Add Payment Method</h2>
            <button class="modal-close" onclick="closeAddPaymentMethodModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="addPaymentMethodForm">
                <!-- Payment Type Selection -->
                <div class="payment-type-selector">
                    <label class="payment-type-option">
                        <input type="radio" name="newPaymentType" value="card" checked>
                        <div class="option-content">
                            <i class="fas fa-credit-card"></i>
                            <span>Credit/Debit Card</span>
                        </div>
                    </label>
                    <label class="payment-type-option">
                        <input type="radio" name="newPaymentType" value="ach">
                        <div class="option-content">
                            <i class="fas fa-university"></i>
                            <span>Bank Account (ACH)</span>
                        </div>
                    </label>
                </div>

                <!-- Card Fields -->
                <div id="newCardFields">
                    <div class="form-group">
                        <label>Card Information</label>
                        <div id="card-element-new" class="stripe-element">
                            <!-- Stripe card element will be mounted here -->
                        </div>
                        <div id="card-errors-new" class="error-message"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="cardholderName">Cardholder Name</label>
                        <!-- REMOVED 'required' attribute -->
                        <input type="text" id="cardholderName" name="cardholderName">
                    </div>
                </div>

                <!-- ACH Fields -->
                <div id="newAchFields" style="display: none;">
                    <div class="form-group">
                        <label>Account Holder Name</label>
                        <input type="text" name="accountHolder" />
                    </div>
                    <div class="form-group">
                        <label>Routing Number</label>
                        <input type="text" name="routingNumber" maxlength="9" />
                    </div>
                    <div class="form-group">
                        <label>Account Number</label>
                        <input type="text" name="accountNumber" />
                    </div>
                    <div class="form-group">
                        <label>Account Type</label>
                        <select name="accountType">
                            <option value="checking">Checking</option>
                            <option value="savings">Savings</option>
                        </select>
                    </div>
                    <p class="text-muted" style="margin-top:8px;font-size:13px;">
                        We’ll send two micro‑deposits for verification after you add your bank account.
                    </p>
                </div>

                <button type="submit" class="btn btn-primary btn-block">
                    Save Payment Method
                </button>
            </form>
        </div>
    </div>
</div>